(window["webpackJsonpef-taskapp-frontend"]=window["webpackJsonpef-taskapp-frontend"]||[]).push([[4],{384:function(e,t,a){},389:function(e,t,a){"use strict";a.r(t);var n,r=a(18),l=a.n(r),o=a(26),i=a(24),s=a(25),c=a(28),u=a(27),d=a(29),m=a(0),p=a.n(m),f=a(57),g=a(3),b=a(10),E=a(12),h=a(124),v=a(386),O={couchDBUrl:"http://localhost:5984",couchDBAuth:{username:"admin",password:"iniadmin"}},D=a(194),k=D.object().shape({assignee:D.object().required("Please select an assignee"),title:D.string().max(40,"Please enter no more than 40 characters").required("Please enter a title"),description:D.string().max(1e3,"Please enter no more than 255 characters").required("Please enter a description"),tags:D.array().required("Please select at least 1 tag").min(1,"Please select at least 1 tag")}),y=a(73),T="completed",w=(n={},Object(y.a)(n,"backlog","Backlog"),Object(y.a)(n,"in-progress","In Progress"),Object(y.a)(n,T,"Completed"),n),C=new(function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"setName",value:function(e){this._name=e}},{key:"name",get:function(){return this._name}},{key:"urlRemote",get:function(){return O.couchDBUrl}},{key:"optionsRemote",get:function(){return{auth:O.couchDBAuth}}}]),t}(v.a)),S=k,_={assignee:"",reporter:"",title:"",status:"backlog",description:"",dueDate:new Date,tags:[]},j=a(38),A=a(37),L={HOME_TEXT_BUTTON_ADD_ITEM:"Add Item",HOME_TEXT_BUTTON_UPLOAD_LIST:"Sync List",HOME_TEXT_ALERT_TASK_DELETED:"Task Deleted",HOME_TEXT_ALERT_TASK_CREATED:"Task Created",HOME_TEXT_ALERT_TASK_UPDATED:"Task Updated",HOME_TEXT_ALERT_SYNC_COMPLETE:"Sync Completed"},M="#52BB9A",x="#5FA8D3",P="#F8F8F8",R="#ff8080",I="#8D8D8D",B="You are currently offline",U="You are currently online",F=function(e){return p.a.createElement(f.a,{p:20,width:1,bg:M,sx:{position:"fixed"}},p.a.createElement(f.d,{alignItems:"center",justifyContent:"space-between"},p.a.createElement(f.a,{width:.7},p.a.createElement(f.e,{fontSize:4},"Tasklist App")),p.a.createElement(f.a,{width:.3},p.a.createElement(h.Detector,{render:function(e){var t=e.online;return p.a.createElement(f.f,{p:10,color:t?P:R,sx:{borderWidth:"1px",borderStyle:"solid",borderRadius:"5px",borderColor:t?P:R}},t?U:B)}}))))},N={breakpoints:["40em","52em","64em"],fontSizes:[10,12,14,16,18,32,48,64],space:[0,4,8,16,32,64,128,256],fonts:{body:"system-ui, sans-serif",heading:"inherit",monospace:"Menlo, monospace"},fontWeights:{body:400,heading:700,bold:700},lineHeights:{body:1.5,heading:1.25},shadows:{small:"0 0 4px rgba(0, 0, 0, .125)",large:"0 0 24px rgba(0, 0, 0, .125)"},input:{borderColor:I},select:{borderColor:I},textarea:{borderColor:I},text:{color:"#232323",error:{color:R},subtitle:{fontSize:14,fontWeight:"bold"}},buttons:{primary:{color:P,bg:M,boxShadow:"small"}},variants:{inline:{display:"inline-block"},listContainer:{borderRadius:10,bg:P,p:8},listItemContainer:{borderRadius:5,bg:"#DDD",p:10,boxShadow:"small"},tag:{display:"inline-block",p:2,mr:1,borderRadius:20,bg:"#627C85",color:P,fontSize:11},onlineStatus:{borderColor:M,borderRadius:2,padding:10}},modal:{content:{height:"85%",width:"50%",left:"50%",right:"auto",bottom:"auto",top:"50%",marginRight:"-50%",transform:"translate(-50%, -50%)"}}},z=a(322),H=function(e){return p.a.createElement(z.a,{theme:N},p.a.createElement(F,null),p.a.createElement(f.a,{pt:100,width:1},p.a.createElement(f.a,{ml:20,mr:20},e.children)))},X=a(168),J=a.n(X),V=function(e){var t=new Date(e);if(t){var a=t.getDate(),n=t.getMonth(),r=t.getFullYear();return"".concat(a," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][n]," ").concat(r)}return""};J.a.setAppElement("body");var q=function(e){var t=e.opened,a=e.onClose,n=e.onEdit,r=e.onMoveCard,l=e.onRemove,o=e.task,i=o&&(new Date).getTime()>new Date(o.dueDate).getTime(),s=o&&o.status===T;return p.a.createElement(J.a,{isOpen:t,onRequestClose:a,shouldCloseOnOverlayClick:!0,style:N.modal},o&&p.a.createElement(f.a,null,p.a.createElement(f.d,{mb:10,justifyContent:"space-between",alignItems:"top"},p.a.createElement(f.e,{fontSize:5},o.title),p.a.createElement(f.a,null,p.a.createElement(f.b,{variant:"primary",onClick:function(){return n(!0,o)},mr:10},"Edit"),p.a.createElement(f.b,{variant:"primary",onClick:function(){return l(o._id)},mr:10},"Remove"),p.a.createElement(f.b,{variant:"primary",onClick:a},"Close"))),p.a.createElement("hr",null),p.a.createElement(f.d,{mb:50,justifyContent:"space-between"},p.a.createElement(f.a,null,p.a.createElement(f.f,null,p.a.createElement("b",null,s?"Completed on :":"Due on :")," ",V(s?o.completedAt:o.dueDate)),p.a.createElement(f.f,null,o.assignee&&p.a.createElement(p.a.Fragment,null,p.a.createElement("b",null,"Assignee:")," ",o.assignee.username)),p.a.createElement(f.f,{pt:8},p.a.createElement("b",null,w[o.status])),p.a.createElement(f.f,{pt:8,fontWeight:"bold",fontSize:16,color:R},i&&!s&&"OVERDUE")),p.a.createElement(f.a,null,p.a.createElement(f.f,{textAlign:"right"},p.a.createElement("b",null,"Reported on:")," ",V(o.createdAt)),p.a.createElement(f.f,{textAlign:"right"},o.reporter&&p.a.createElement(p.a.Fragment,null,p.a.createElement("b",null,"Reporter:")," ",o.reporter.username)))),p.a.createElement(f.a,{mb:50},p.a.createElement(f.f,null,p.a.createElement("b",null,"Description")),p.a.createElement("hr",null),p.a.createElement(f.a,null,o.description)),p.a.createElement(f.a,{mb:50},p.a.createElement(f.f,null,p.a.createElement("b",null,"Tags")),p.a.createElement("hr",null),p.a.createElement(f.a,null,o.tags&&o.tags.map(function(e){return p.a.createElement(f.a,{fontSize:14,key:e,variant:"tag"},e)}))),p.a.createElement(f.a,null,p.a.createElement(function(e){switch(e.task.status){case"backlog":return p.a.createElement(f.b,{variant:"primary",bg:x,onClick:function(){return r("in-progress",o)},mr:10},"Move to ",w["in-progress"]);case"in-progress":return p.a.createElement(p.a.Fragment,null,p.a.createElement(f.b,{variant:"primary",bg:x,onClick:function(){return r("backlog",o)},mr:10},"Move to ",w.backlog),p.a.createElement(f.b,{variant:"primary",bg:x,onClick:function(){return r(T,o)},mr:10},"Move to ",w[T]));case T:return p.a.createElement(f.b,{variant:"primary",bg:x,onClick:function(){return r("in-progress",o)},mr:10},"Move to ",w["in-progress"]);default:return p.a.createElement(p.a.Fragment,null)}},{task:o}))))},K=a(331),W=a(332),Y=a.n(W),G=a(385),Q={LABEL_ADD:"Add New Task",LABEL_EDIT:"Edit Task"},Z=a(370),$=a(371),ee=a.n($),te=a(372),ae=a.n(te);a(384);function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var le=function(e){return p.a.createElement(ee.a,{renderInput:function(t){var a=t.addTag,n=Object(Z.a)(t,["addTag"]),r=n.value&&n.value.trim().toLowerCase()||"",l=r.length,o=e.suggestions&&e.suggestions.filter(function(e){return e.toLowerCase().slice(0,l)===r})||[];return p.a.createElement(ae.a,{ref:n.ref,suggestions:o,shouldRenderSuggestions:function(e){return e&&e.trim().length>0},getSuggestionValue:function(e){return e},renderSuggestion:function(e){return p.a.createElement(f.f,null,e)},inputProps:re({},n,{onChange:function(e,t){t.newValue;"enter"===t.method?e.preventDefault():n.onChange(e)}}),onSuggestionSelected:function(e,t){var n=t.suggestion;a(n)},onSuggestionsClearRequested:function(){},onSuggestionsFetchRequested:function(){}})},value:e.value||[],onChange:e.onChange})};function oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}J.a.setAppElement("body");var ie=Object(E.c)(function(e){return{taskDetail:A.selector.selectTaskDetail(e)}},null)(function(e){var t=e.taskDetail,a=e.opened,n=e.onSubmit,r=e.onClose,l=e.userList,o=e.initialValues,i=e.tagList,s=l.map(function(e){return p.a.createElement("option",{key:e.id,value:JSON.stringify(e)},e.username)}),c=t&&function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?oe(a,!0).forEach(function(t){Object(y.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},t,{assignee:JSON.stringify(t.assignee),dueDate:new Date(t.dueDate)});return p.a.createElement(J.a,{isOpen:a,contentLabel:Q.label,onRequestClose:r,shouldCloseOnOverlayClick:!0,style:N.modal},p.a.createElement(f.e,{mb:10,fontSize:3},t?Q.LABEL_EDIT:Q.LABEL_ADD),p.a.createElement(G.a,{initialValues:c||o,onSubmit:function(e){return n(e,t)},validationSchema:S,render:function(e){return p.a.createElement("form",{onSubmit:e.handleSubmit},p.a.createElement(f.a,{mb:20,width:1},p.a.createElement(K.b,{pb:10,htmlFor:"assignee"},"Assignee"),p.a.createElement(K.c,{id:"assignee",name:"assignee",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.assignee},p.a.createElement("option",{value:null}),s),e.touched.assignee&&e.errors.assignee&&p.a.createElement(f.f,{pt:2,variant:"error"},e.errors.assignee)),p.a.createElement(f.a,{mb:20,width:1},p.a.createElement(K.b,{pb:10,htmlFor:"title"},"Title"),p.a.createElement(K.a,{id:"title",name:"title",style:{width:"100%"},onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.title}),e.touched.title&&e.errors.title&&p.a.createElement(f.f,{pt:2,variant:"error"},e.errors.title)),p.a.createElement(f.a,{mb:20,width:1},p.a.createElement(K.b,{pb:10,htmlFor:"description"},"Description"),p.a.createElement(K.d,{id:"description",name:"description",style:{width:"100%"},rows:10,onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.description}),e.touched.description&&e.errors.description&&p.a.createElement(f.f,{pt:2,variant:"error"},e.errors.description)),p.a.createElement(f.a,{mb:20,width:1},p.a.createElement(K.b,{pb:10,htmlFor:"dueDate"},"Due Date"),p.a.createElement(Y.a,{name:"dueDate",onChange:function(t){return e.setFieldValue("dueDate",t)},value:e.values.dueDate,minDate:new Date,format:"dd/MM/y"}),e.touched.dueDate&&e.errors.dueDate&&p.a.createElement(f.f,{pt:2,variant:"error"},e.errors.dueDate)),p.a.createElement(f.a,{mb:20,width:1},p.a.createElement(K.b,{pb:10,htmlFor:"tags"},"Tags"),p.a.createElement(le,{value:e.values.tags,suggestions:i,onChange:function(t){return e.setFieldValue("tags",t)}}),e.touched.dueDate&&e.errors.dueDate&&p.a.createElement(f.f,{pt:2,variant:"error"},e.errors.dueDate)),p.a.createElement(f.b,{variant:"primary",type:"submit",mr:10},"Submit"),p.a.createElement(f.b,{type:"reset",variant:"primary",onClick:r},"Close"))}}))}),se=a(117);var ce=Object(E.c)(null,function(e){return Object(b.b)({handleModalTaskOpen:function(e,t){return A.actions.ModalTaskDetailOpen(e,t)}},e)})(function(e){var t=e.tasks,a=e.label,n=e.handleModalTaskOpen,r=Object(m.useState)(p.a.createElement(p.a.Fragment,null)),l=Object(se.a)(r,2),o=l[0],i=l[1],s=function(e,t){var a=Object(m.useState)(e),n=Object(se.a)(a,2),r=n[0],l=n[1];return Object(m.useEffect)(function(){var a=setTimeout(function(){l(e)},t);return function(){clearTimeout(a)}},[e]),r}(o,10);return Object(m.useEffect)(function(){s&&i(t.map(function(e){var t=(new Date).getTime()>new Date(e.dueDate).getTime(),a=e.status===T;return p.a.createElement(f.c,{width:1,mb:10,variant:"listItemContainer",onClick:function(){return function(e){n(!0,e)}(e)},key:e._id},p.a.createElement(f.d,{justifyContent:"space-between",alignItems:"top"},p.a.createElement(f.a,null,p.a.createElement(f.f,{variant:"subtitle",mb:10,fontSize:14},e.title),p.a.createElement(f.f,{fontSize:12},a?"Completed on :":"Due on :"," ",V(a?e.completedAt:e.dueDate))),p.a.createElement(f.a,null,p.a.createElement(f.f,{fontSize:12,textAlign:"right",mb:10},e.assignee&&e.assignee.username),p.a.createElement(f.f,{fontSize:12,textAlign:"right",color:R},t&&!a&&"OVERDUE"))),p.a.createElement("hr",null),p.a.createElement(f.f,{fontSize:14,mb:30},"".concat(e.description.slice(0,100))),p.a.createElement(f.f,null,e.tags&&e.tags.map(function(e){return p.a.createElement(f.a,{key:e,variant:"tag"},e)})))}))},[s]),p.a.createElement(f.a,{width:1,mr:4,variant:"listContainer"},p.a.createElement(f.e,{pb:40,pl:10,fontSize:3},a),o)}),ue=function(e){var t=Object(m.useState)([p.a.createElement(p.a.Fragment,null)]),a=Object(se.a)(t,2),n=a[0],r=a[1];return Object(m.useEffect)(function(){var t,a=(t={},Object(y.a)(t,"backlog",[]),Object(y.a)(t,"in-progress",[]),Object(y.a)(t,T,[]),t);e.taskList.forEach(function(e){switch(e.status){case"backlog":if(a.backlog.filter(function(t){return t._id===e._id}).length<1)return a.backlog.push(e);break;case"in-progress":if(a["in-progress"].filter(function(t){return t._id===e._id}).length<1)return a["in-progress"].push(e);break;case T:if(a[T].filter(function(t){return t._id===e._id}).length<1)return a[T].push(e);break;default:return!1}});var n=Object.keys(a).map(function(e,t){return p.a.createElement(ce,{key:t,tasks:a[e].sort(function(e,t){return new Date(t.dirtyAt)-new Date(e.dirtyAt)}),label:w[e]})});r(n)},[e.taskList]),p.a.createElement(f.d,{mt:10,width:1,justifyContent:"space-between",alignItems:"top"},n)},de=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.length-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a<0)return n;if(t[a].tags)for(var r=function(e){n.filter(function(n){return n===t[a].tags[e]}).length<1&&n.push(t[a].tags[e])},l=0;l<t[a].tags.length;l++)r(l);return e(t,a-1,n)},me=localStorage.getItem("lastSync"),pe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={unsub:null,taskList:[],lastSyncDate:me?new Date(JSON.parse(me)):"Never",loading:!1,taskAddOpened:!1,taskDetailOpened:!1,tagList:[]},a.handleUpdate=function(){(0,a.props.handleTaskListSave)(C.data)},a.handleRemove=function(){var e=Object(o.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.deleteItem(t);case 3:alert(L.HOME_TEXT_ALERT_TASK_DELETED),a.handleModalClose(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(o.a)(l.a.mark(function e(t,n){var r,o,i,s,c,u,d,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props.user,o=t.title,i=t.assignee,s=t.description,c=t.status,u=t.dueDate,d=t.tags,m={title:o,assignee:JSON.parse(i),reporter:r,description:s,status:c,dueDate:u,tags:d},e.prev=3,!n){e.next=9;break}return e.next=7,C.editItem(n._id,m);case 7:e.next=11;break;case 9:return e.next=11,C.addItem(m);case 11:alert(n?L.HOME_TEXT_ALERT_TASK_UPDATED:L.HOME_TEXT_ALERT_TASK_CREATED),a.handleModalClose(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0);case 18:case"end":return e.stop()}},e,null,[[3,15]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleMoveCard=function(){var e=Object(o.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={status:t},t===T&&(r.completedAt=new Date),e.prev=2,e.next=5,C.editItem(n._id,r);case 5:alert(L.HOME_TEXT_ALERT_TASK_UPDATED),a.handleModalClose(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}(),a.handleUpload=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,C.upload();case 3:alert(L.HOME_TEXT_ALERT_SYNC_COMPLETE),localStorage.setItem("lastSync",JSON.stringify(t)),a.setState({lastSyncDate:t});case 6:case"end":return e.stop()}},e)})),a.handleModalClose=function(){(0,a.props.handleModalCloseAll)()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,C.subscribe(this.handleUpdate);case 3:e.t1=e.sent,e.t2={unsub:e.t1,loading:!0},e.t0.setState.call(e.t0,e.t2);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.isInitialized){e.next=4;break}return C.setName("lil_tasks"),e.next=4,C.initialize();case 4:C.data.length>0&&(t=de(C.data),JSON.stringify(this.state.tagList)!==JSON.stringify(t)&&this.setState({tagList:t})),this.setState({loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(o.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.state.unsub)&&t(),e.next=4,C.deinitialize();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.userList,r=t.handleModalTaskOpen,l=t.modalTaskOpened,o=t.modalTaskDetailOpened,i=t.taskDetail,s=t.taskList,c=this.state,u=c.lastSyncDate,d=c.loading,m=c.tagList;return p.a.createElement(H,{loading:d},p.a.createElement(q,{opened:o,onClose:this.handleModalClose,onEdit:r,onMoveCard:this.handleMoveCard,onRemove:this.handleRemove,task:i}),p.a.createElement(ie,{opened:l,initialValues:_,onClose:this.handleModalClose,onSubmit:this.handleSubmit,userList:n,tagList:m}),p.a.createElement(f.a,{width:1},p.a.createElement("h3",null,"Welcome, ",a.username,"!"),p.a.createElement("p",null,"Last Sync Date: ",u?u.toString():"Never")),p.a.createElement(h.Detector,{render:function(t){var a=t.online;return p.a.createElement(f.d,{width:1,variant:"inline"},p.a.createElement(f.a,{width:1},p.a.createElement(f.b,{variant:"primary",mr:2,onClick:function(){return r(!0)}},L.HOME_TEXT_BUTTON_ADD_ITEM),p.a.createElement(f.b,{variant:"primary",onClick:e.handleUpload,disabled:!a,sx:{":disabled":{backgroundColor:I}}},L.HOME_TEXT_BUTTON_UPLOAD_LIST)))}}),p.a.createElement(ue,{taskList:s}))}}]),t}(p.a.PureComponent);t.default=Object(E.c)(function(e){return{user:j.selector.selectData(e),userList:j.selector.selectUsers(e),modalTaskOpened:A.selector.selectModalTaskOpened(e),modalTaskDetailOpened:A.selector.selectModalTaskDetailOpened(e),taskDetail:A.selector.selectTaskDetail(e),taskList:A.selector.selectTaskList(e)}},function(e){return Object(b.b)({changePage:function(e){return Object(g.d)(e)},handleTaskListSave:function(e){return A.actions.TaskListSave(e)},handleModalTaskOpen:function(e,t){return A.actions.ModalTaskOpen(e,t)},handleModalCloseAll:function(){return A.actions.ModalTaskCloseAll()}},e)})(pe)}}]);
//# sourceMappingURL=4.0c03b7d2.chunk.js.map